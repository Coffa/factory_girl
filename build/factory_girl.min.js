!function(a,b,c){"use strict";!function(a){a.utils={},a.utils.merge=function(a,b,c){var d;for(d in b)b.hasOwnProperty(d)&&(a[d]&&c||(a[d]=b[d]))}}(b="undefined"==typeof b?{}:b,c),function(a){function b(){}a.datum=new b;var c={};b.prototype.checkDefined=function(a){if(c[a])return!0;throw Error(a+" is not exist")},b.prototype.setDefined=function(a,b,d){this.setAlias(b,d),c[a]={factories:[],options:b,defined:d}},b.prototype.setAlias=function(a,b){var c=a.alias||[];if(delete a.alias,c instanceof Array)for(var d=c.length-1;d>=0;d--)this.setDefined(c[d],a,b);else this.setDefined(c,a,b)},b.prototype.getOptions=function(a){return this.checkDefined(a),c[a].options},b.prototype.getDefined=function(a){return this.checkDefined(a),c[a].defined},b.prototype.createFactory=function(b){var d=this.getDefined(b),e=new a.Model(b);return c[b].factories.push(e),d.call(e),e}}(b="undefined"==typeof b?{}:b,c),function(a){function b(a){return this instanceof b?(this.__name__=a,d(this),void 0):new b(a)}function c(c,d){var e=a.datum.getDefined(d),f=new b(d);return e.call(f),c[d]=f,f[c.__name__]=c,f}function d(c){var d=c.getName(),e=a.datum.getOptions(d);if(e.inherit){var f=a.datum.getDefined(e.inherit),g=new b(e.inherit);f.call(c),a.utils.merge(c,g,!0)}}a.Model=b,b.prototype.getName=function(){return this.__name__},b.prototype.attributes=function(){return this.toJSON(!0)},b.prototype.toJSON=function(a,c){var d=Object.keys(this),e={};"undefined"!=typeof c&&c instanceof Array||(c=[]),c.push(this.getName());for(var f,g,h=d.length-1;h>=0;h--)g=d[h],f=this[g],f instanceof Array?f.forEach(function(d){if(d instanceof b){if(a||-1!==c.indexOf(d.getName()))return;d=d.toJSON(c)}e[g]=e[g]||[],e[g].push(d)}):f instanceof b?a||-1!==c.indexOf(f.getName())||(e[g]=f.toJSON(c)):/^__(.)+__$/.test(g)||(e[g]=f);return e},b.prototype.belongTo=function(a,b){"undefined"==typeof b&&(b=a+"_id");var d=c(this,a);this[b]=d.id},b.prototype.hasOne=function(a,b){"undefined"==typeof b&&(b=this.__name__+"_id");var d=c(this,a);d[b]=this.id},b.prototype.hasMany=function(c,d,e){"undefined"==typeof e&&(e=this.__name__+"_id");for(var f,g=a.datum.getDefined(c),h=[],i=d-1;i>=0;i--)f=new b(c),g.call(f),f[e]=this.id,h.push(f);this[c]=h}}(b="undefined"==typeof b?{}:b,c),function(a,b){b.version={full:"0.1.0",major:0,minor:1,dot:0,codeName:"black"},b.define=function(a){var c=arguments[arguments.length-1],d=3===arguments.length?arguments[1]:{};if("function"!=typeof c)throw Error("argument must be a function");b.datum.setDefined(a,d,c)},b.defined=function(){try{b.datum.checkDefined()}catch(a){return!1}return!0},b.create=function(a){return b.datum.createFactory(a)},b.createLists=function(a,c){for(var d=[];c--;)d.push(b.datum.createFactory(a));return d},b.attributesFor=function(a){var c=b.datum.getDefined(a),d=new b.Model(a);return c.call(d),d.attributes()},a.version=b.version,a.define=b.define,a.defined=b.defined,a.create=b.create,a.createLists=b.createLists,a.attributesFor=b.attributesFor}(a="undefined"==typeof a?{}:a,b="undefined"==typeof b?{}:b,c)}(FactoryGirl="undefined"==typeof module?{}:module.exports,{},this);