!function(a,b){"use strict";!function(a){a.utils={},a.utils.merge=function(a,b,c){if("object"!=typeof a)throw Error("Target must be object");for(var d in b)b.hasOwnProperty(d)&&(a[d]&&c||(a[d]=b[d]))}}(b="undefined"==typeof b?{}:b),function(a){function b(){}var c={},d={};a.datum=new b,b.prototype.checkDefined=function(a){if(c[a])return!0;throw Error(a+" is not defined")},b.prototype.setDefined=function(a,b,d){this.setAlias(b,d),c[a]={factories:[],options:b,defined:d}},b.prototype.setAlias=function(a,b){var c=a.alias||[];if(delete a.alias,c instanceof Array)for(var d=c.length-1;d>=0;d--)this.setDefined(c[d],a,b);else this.setDefined(c,a,b)},b.prototype.getOptions=function(a){return this.checkDefined(a),c[a].options},b.prototype.getDefined=function(a){return this.checkDefined(a),c[a].defined},b.prototype.createFactory=function(b,d){var e=new a.Model(b,d);return c[b].factories.push(e),e},b.prototype.remove=function(a){return this.checkDefined(a),delete c[a],this},b.prototype.clear=function(){for(var a in c)c.hasOwnProperty(a)&&this.remove(a);return this},b.prototype.count=function(){return Object.keys(c).length},b.prototype.setSequence=function(a,b){d[a]={constructor:b,next_id:0}},b.prototype.nextSequence=function(a){return d[a].next_id+=1,d[a].constructor(d[a].next_id)}}(b="undefined"==typeof b?{}:b),function(a){function b(a,c){return this instanceof b?(this.__name__=a,void d(this,c)):new b(a)}function c(a,c,d,e,f){var g;return e||(e=d,d=c),e=e||(f?d:a.getName())+"_id",g=new b(d),a[c]=g,g[a.getName()]=a,f?a[e]=g.id:g[e]=a.id,g}function d(b,c){var d=b.getName(),f=a.datum.getOptions(d),g=a.datum.getDefined(d);g.call(b),a.utils.merge(b,c),e(b,f.inherit)}function e(c,d){if(d){var e=a.datum.getDefined(d),f=new b(d);e.call(f),a.utils.merge(c,f,!0);for(var g,h,i=Object.keys(c),j=i.length-1;j>=0;j--)g=i[j],h=c[g],h instanceof Array?h.forEach(function(a){a instanceof b&&a[f.getName()+"_id"]&&(delete a[f.getName()+"_id"],a[c.getName()+"_id"]=c.id)}):h instanceof b&&h[f.getName()+"_id"]&&(delete h[f.getName()+"_id"],h[c.getName()+"_id"]=c.id)}}a.Model=b,b.prototype.getName=function(){return this.__name__},b.prototype.attributes=function(){return this.toJSON(!0)},b.prototype.toJSON=function(a,c){var d=Object.keys(this),e={};"undefined"!=typeof c&&c instanceof Array||(c=[]),c.push(this.getName());for(var f,g,h=d.length-1;h>=0;h--)g=d[h],f=this[g],f instanceof Array?f.forEach(function(d){if(d instanceof b){if(a||-1!==c.indexOf(d.getName()))return;d=d.toJSON(c)}e[g]=e[g]||[],e[g].push(d)}):f instanceof b?a||-1!==c.indexOf(f.getName())||(e[g]=f.toJSON(c)):/^__(.)+__$/.test(g)||(e[g]=f);return e},b.prototype.belongTo=function(a,b,d){return c(this,a,b,d,!0)},b.prototype.hasOne=function(a,b,d){return c(this,a,b,d,!1)},b.prototype.hasMany=function(a,c,d,e){"number"==typeof c&&(e=d,d=c,c=null),c=c||a,e=e||this.getName()+"_id";for(var f,g=[],h=d-1;h>=0;h--)f=new b(c),f[e]=this.id,g.push(f);this[a]=g},b.prototype.sequence=function(b,c){this[c]=a.datum.nextSequence(b)}}(b="undefined"==typeof b?{}:b),function(a,b){b.version={full:"0.2.0",major:0,minor:2,dot:0,codeName:"sapphire"},b.define=function(a){var c=arguments[arguments.length-1],d=3===arguments.length?arguments[1]:{};if("function"!=typeof c)throw Error("argument must be a function");b.datum.setDefined(a,d,c)},b.defined=function(a){try{b.datum.checkDefined(a)}catch(c){return!1}return!0},b.create=function(a,c){return b.datum.createFactory(a,c)},b.createLists=function(a,c){for(var d=[];c--;)d.push(b.datum.createFactory(a));return d},b.attributesFor=function(a){var c=new b.Model(a);return c.attributes()},b.clear=function(a){a?b.datum.remove(a):b.datum.clear()},b.sequence=function(a,c){if("function"!=typeof c)throw Error("argument must be a function");b.datum.setSequence(a,c)},b.findDefinitions=function(){if(!(a.definitionFilePaths instanceof Array))throw Error("FactoryGirl.definitionFilePaths must be an array");if("undefined"==typeof require)throw Error("FactoryGirl.findDefinitions is not available on browser");var b=require("fs"),c=require("path");a.definitionFilePaths.forEach(function(a){b.readdirSync(a).forEach(function(b){require(c.join(a,b))})})},a.version=b.version,a.define=b.define,a.defined=b.defined,a.create=b.create,a.createLists=b.createLists,a.attributesFor=b.attributesFor,a.clear=b.clear,a.sequence=b.sequence,a.findDefinitions=b.findDefinitions}(a="undefined"==typeof a?{}:a,b="undefined"==typeof b?{}:b)}(FactoryGirl="undefined"==typeof module?{}:module.exports,{},this);