!function(a,b,c){"use strict";!function(a){a.utils={},a.utils.merge=function(a,b,c){if("object"!=typeof a)throw Error("Target must be object");var d;for(d in b)b.hasOwnProperty(d)&&(a[d]&&c||(a[d]=b[d]))}}(b="undefined"==typeof b?{}:b,c),function(a){function b(){}var c={};a.datum=new b,b.prototype.checkDefined=function(a){if(c[a])return!0;throw Error(a+" is not exist")},b.prototype.setDefined=function(a,b,d){this.setAlias(b,d),c[a]={factories:[],options:b,defined:d}},b.prototype.setAlias=function(a,b){var c=a.alias||[];if(delete a.alias,c instanceof Array)for(var d=c.length-1;d>=0;d--)this.setDefined(c[d],a,b);else this.setDefined(c,a,b)},b.prototype.getOptions=function(a){return this.checkDefined(a),c[a].options},b.prototype.getDefined=function(a){return this.checkDefined(a),c[a].defined},b.prototype.createFactory=function(b){var d=(this.getDefined(b),new a.Model(b));return c[b].factories.push(d),d},b.prototype.remove=function(a){return this.checkDefined(a),delete c[a],this},b.prototype.clear=function(){var a;for(a in c)c.hasOwnProperty(a)&&this.remove(a);return this}}(b="undefined"==typeof b?{}:b,c),function(a){function b(a){return this instanceof b?(this.__name__=a,d(this),void 0):new b(a)}function c(a,c){var d=new b(c);return a[c]=d,d[a.getName()]=a,d}function d(b){var c=b.getName(),d=a.datum.getOptions(c),f=a.datum.getDefined(c);f.call(b),e(b,d.inherit)}function e(c,d){if(d){var e=a.datum.getDefined(d),f=new b(d);e.call(f),a.utils.merge(c,f,!0);for(var g,h,i=Object.keys(c),j=i.length-1;j>=0;j--)g=i[j],h=c[g],h instanceof Array?h.forEach(function(a){a instanceof b&&a[f.getName()+"_id"]&&(delete a[f.getName()+"_id"],a[c.getName()+"_id"]=c.id)}):h instanceof b&&iterate[f.getName()+"_id"]&&(delete h[f.getName()+"_id"],h[c.getName()+"_id"]=c.id)}}a.Model=b,b.prototype.getName=function(){return this.__name__},b.prototype.attributes=function(){return this.toJSON(!0)},b.prototype.toJSON=function(a,c){var d=Object.keys(this),e={};"undefined"!=typeof c&&c instanceof Array||(c=[]),c.push(this.getName());for(var f,g,h=d.length-1;h>=0;h--)g=d[h],f=this[g],f instanceof Array?f.forEach(function(d){if(d instanceof b){if(a||-1!==c.indexOf(d.getName()))return;d=d.toJSON(c)}e[g]=e[g]||[],e[g].push(d)}):f instanceof b?a||-1!==c.indexOf(f.getName())||(e[g]=f.toJSON(c)):/^__(.)+__$/.test(g)||(e[g]=f);return e},b.prototype.belongTo=function(a,b){"undefined"==typeof b&&(b=a+"_id");var d=c(this,a);this[b]=d.id},b.prototype.hasOne=function(a,b){"undefined"==typeof b&&(b=this.getName()+"_id");var d=c(this,a);d[b]=this.id},b.prototype.hasMany=function(a,c,d){"undefined"==typeof d&&(d=this.getName()+"_id");for(var e,f=[],g=c-1;g>=0;g--)e=new b(a),e[d]=this.id,f.push(e);this[a]=f}}(b="undefined"==typeof b?{}:b,c),function(a,b){b.version={full:"0.1.0",major:0,minor:1,dot:0,codeName:"black"},b.define=function(a){var c=arguments[arguments.length-1],d=3===arguments.length?arguments[1]:{};if("function"!=typeof c)throw Error("argument must be a function");b.datum.setDefined(a,d,c)},b.defined=function(a){try{b.datum.checkDefined(a)}catch(c){return!1}return!0},b.create=function(a){return b.datum.createFactory(a)},b.createLists=function(a,c){for(var d=[];c--;)d.push(b.datum.createFactory(a));return d},b.attributesFor=function(a){var c=new b.Model(a);return c.attributes()},b.clear=function(a){a?b.datum.remove(a):b.datum.clear()},a.version=b.version,a.define=b.define,a.defined=b.defined,a.create=b.create,a.createLists=b.createLists,a.attributesFor=b.attributesFor,a.clear=b.clear}(a="undefined"==typeof a?{}:a,b="undefined"==typeof b?{}:b,c)}(FactoryGirl="undefined"==typeof module?{}:module.exports,{},this);